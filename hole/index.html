<!DOCTYPE html>
    <title> 9. Дырка в полу </title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>

    <body style='margin : 0px; overflow: hidden; font-family: Monospace;'>
        <a-scene 
            embedded
            vr-mode-ui="enabled: false;"
            arjs="trackingMethod: best; debugUIEnabled: false;"
            renderer="logarithmicDepthBuffer: true;"
        >
            <a-marker preset="hiro">
                <!-- <a-box material="src: url(./scr/images/example_for_task9.jpg)" hole></a-box> -->
                <a-entity he="texture:url(./scr/images/example_for_task9.jpg)"></a-entity>
            </a-marker>
                  
    <script>
        document.addEventListener("DOMContentLoaded", () => {

        AFRAME.registerComponent("he", {
            schema: {
                texture: {type: 'string'}
            },

            init: function() {
                // console.log("FUCK");

                let texture_loader = new THREE.TextureLoader();
                
                let inside_cube_geometry = new THREE.CubeGeometry(2,2,2);
                let inside_cube_texture = loader.load(this.data.texture, this.el.rederer);
                
                let insige_cube_material = new THREE.MeshLambertMaterial({
                    transparent:true,
                    map: texture,
                    side: THREE.BackSide
                }); 


                let inside_cube_mesh = new THREE.Mesh(inside_cube_geometry, insige_cube_material);
                insige_cube_mesh.y = -1;
                
                this.el.sceneEl.add(inside_cube_mesh);
                

                let outside_cude_geometry = new THREE.PlaneGeometry(18,18, 9,9);
                outside_cude_geometry.faces.splice(80, 2); 
                outside_cude_geometry.faceVertexUvs[0].splice(80, 2);
                
                let outside_cube_material = new THREE.MeshBasicMaterial({
                    colorWrite: false
                });
                
                let outside_cube_mesh = new THREE.Mesh(outside_cude_geometry, outside_cube_material);
                
                outside_cube_mesh.rotation.x = -Math.PI/2;
                
                this.el.sceneEl.add(outside_cube_mesh);
            }
        });
    })
</script>
            <a-entity camera> </a-entity>
        </a-scene>
    </body>
</html>